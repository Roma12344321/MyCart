create table Person(
    id int generated by default as identity primary key,
    username varchar(100) not null unique,
    year int check ( year>1900 ),
    mail varchar(120),
    password varchar(100) not null,
    role varchar not null
)
alter table person
    add created_at timestamp default not null;

create table Category(
    id int generated by default as identity primary key,
    name varchar(100) not null unique
)

create table Good(
    id int generated by default as identity primary key,
    name varchar(100) not null unique,
    price int not null,
    description varchar,
    cat_id int references category(id) on delete set null
);

create table Cart(
    id int generated by default as identity,
    person_id int references person(id) on delete cascade,
    good_id int references good(id) on delete cascade,
    amount int check ( amount>-1 ) not null,
    primary key (person_id,good_id)
)
create table "order"(
    id int generated by default as identity primary key,
    person_id int references person(id) on delete cascade,
    date timestamp not null,
    address varchar not null,
    status bool
)
ALTER TABLE Good ADD COLUMN image_path VARCHAR(255);